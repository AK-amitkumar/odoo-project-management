<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_order_form" model="ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <field name="arch" type="xml">
            	<xpath expr="//form[@string='Sales Order']//page[@string='Sales Order']//field[@name='project_id']" position="replace">
                	<field name="project"/>      
                	<field name="project_manager"/>    
                </xpath>            
            </field>
        </record>

    	<record id="view_order_line_form2" model="ir.ui.view">
            <field name="name">sale.order.line.form2</field>
            <field name="model">sale.order.line</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="sale.view_order_line_form2" />
            <field name="arch" type="xml">
        		<xpath expr="//form[@string='Sales Order Lines']" position="replace">
        			<form string="Sales Order Lines">
	                    <group colspan="4" col="6">
	                        <field name="order_id"/>
	                        <field name="order_project" readonly="1"/>
	                        <field name="order_project_manager" readonly="1"/>
	                        <field name="order_partner_id" readonly="1"/>
	                        <field name="invoiced"/>
	
	                        <field name="product_id" readonly="1"/>
	                        <field name="product_uom_qty" readonly="1"/>
	                        <field name="product_uom"/>
	
	                        <field colspan="4" name="name" groups="base.group_extended"/>
	                        <field name="company_id" groups="base.group_multi_company" readonly="1"/>
	                    </group>
	                    <separator colspan="4" string="Price"/>
	                    <group colspan="4" col="6">
	                        <field name="price_unit"/>
	                        <field name="discount"/>
	                        <field name="price_subtotal"/>
	                    </group>
	                    <separator colspan="4" string="Notes"/>
	                    <field colspan="4" name="notes" nolabel="1"/>
	                    <separator colspan="4"/>
	                    <field name="state"/>
	                    <group col="4" colspan="2">
	                        <button name="button_cancel"
	                            string="Cancel" type="object"
	                            icon="gtk-cancel"
	                            states="confirmed,exception"/>
	                        <button colspan="1"
	                            name="%(sale.action_view_sale_order_line_make_invoice)d"
	                            string="Create Invoice"
	                            type="action"
	                            states="done"
	                            icon="gtk-go-forward"
	                            groups="account.group_account_user"
	                            attrs="{'invisible': [('invoiced', '=', 1)]}"/>
	                        <button name="button_done"
	                            string="Done" type="object"
	                            states="confirmed,exception"
	                            icon="gtk-go-forward" />
	                        <button name="button_confirm"
	                            string="Confirmed" type="object"
	                            states="done,exception"
	                            icon="gtk-go-forward" />    
	                    </group>
           			</form>
           		</xpath>
        	</field>
     	</record>	

		<record id="view_order_line_tree" model="ir.ui.view">
            <field name="name">sale.order.line.tree</field>
            <field name="model">sale.order.line</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="sale.view_order_line_tree" />
            <field name="arch" type="xml">
            	<xpath expr="//tree[@string='Sales Order Lines']/field[@name='order_id']" position="after">
           		 	<field name="order_project"/>
           		 	<field name="order_project_manager"/>
           		</xpath>
            </field>
        </record>
        
        <record id="view_sales_order_line_filter" model="ir.ui.view">
            <field name="name">sale.order.line.select</field>
            <field name="model">sale.order.line</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="sale.view_sales_order_line_filter" />
            <field name="arch" type="xml">
            	<xpath expr="//search[@string='Search Sales Order']/field[@name='order_id']" position="after">
           		 	<field name="order_project"/>
           		 	<field name="order_project_manager"/>
           		</xpath>
           	</field>
        </record>

        <record id="view_sales_order_uninvoiced_line_filter" model="ir.ui.view">
            <field name="name">sale.order.uninvoiced.line</field>
            <field name="model">sale.order.line</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="sale.view_sales_order_uninvoiced_line_filter" />
            <field name="arch" type="xml">
            	<xpath expr="//search[@string='Search Uninvoiced Lines']/field[@name='order_id']" position="after">
           		 	<field name="order_project"/>
           		 	<field name="order_project_manager"/>
           		</xpath>
            </field>
        </record>

        <record id="view_order_tree" model="ir.ui.view">
            <field name="name">sale.order.tree</field>
            <field name="model">sale.order</field>
            <field name="type">tree</field>
            <field name="priority">2</field>
            <field name="inherit_id" ref="sale.view_order_tree" />
            <field name="arch" type="xml">
            	<xpath expr="//tree[@string='Sales Orders']/field[@name='name']" position="after">
           		 	<field name="project"/>
           		 	<field name="project_manager"/>
           		</xpath>
            </field>
        </record>

		<record id="view_sales_order_filter" model="ir.ui.view">
            <field name="name">sale.order.list.select</field>
            <field name="model">sale.order</field>
            <field name="type">search</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter" />
            <field name="arch" type="xml">
            	<xpath expr="//search[@string='Search Sales Order']/field[@name='name']" position="after">
           		 	<field name="project"/>
           		 	<field name="project_manager"/>
           		</xpath>
            </field>
        </record>



        <act_window name="Make Invoices"		    
		    res_model="sale.order.line.make.invoice"
		    view_mode="form"
		    view_type="form"
		    target="new"        
            key2="client_action_multi"    
		    id="sale.action_view_sale_order_line_make_invoice"
		    view_id="sale.view_sale_order_line_make_invoice"
		    groups="account.group_account_user"/>

          <menuitem
            action="sale.action_order_line_tree2"
            id="menu_sale_line_order_draft"
            groups="account.group_account_user"
            parent="account.menu_finance_receivables"
            sequence="0"/>
		    
   </data>
</openerp>
